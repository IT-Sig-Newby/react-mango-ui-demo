(this["webpackJsonpalbion-map"]=this["webpackJsonpalbion-map"]||[]).push([[0],{284:function(e,t,n){e.exports=n(583)},289:function(e,t,n){},290:function(e,t,n){},316:function(e,t){},318:function(e,t){},348:function(e,t){},349:function(e,t){},414:function(e,t){},583:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),l=(n(289),n(290),n(73)),i=n(23),u=n(96),s=n.n(u),m=r.a.createContext({world:null,clusters:null,clustersById:null}),f=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){s()({uri:window.location.href+"world.json",json:!0}).then((function(e){var t=e.world.clusters.cluster,n=(t=t.map((function(e){var t=e["@displayname"].replace(/-/gi," ").split(" "),n=t.map((function(e){return e[0]})).join("").toUpperCase(),a=e["@id"].startsWith("TNL-")?"mists":"nonMists";return Object(l.a)({},e,{splitName:t,initials:n,type:a})}))).reduce((function(e,t){return e[t["@id"]]=t,e}),{}),a={world:e,clusters:t,clustersById:n};window.data=a,o(a)}))}),[]),r.a.createElement(m.Provider,{value:c},e.children)},E=n(38),p=n(77),d=n(258),b=n(122),O=n(123),v=n(613),C=r.a.createContext({currentCluster:"",setCurrentCluster:function(){}}),j=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement(C.Provider,{value:{currentCluster:c,setCurrentCluster:o}},e.children)},y={SOLO:b.a[500],GROUP:O.a[500],RAID:v.a[500]},P={SAFEAREA:"SAFEZONE",OPENPVP_YELLOW:"YELLOW",OPENPVP_BLACK_1:"OPENPVP_BLACK_LOW",OPENPVP_BLACK_2:"OPENPVP_BLACK_LOW",OPENPVP_BLACK_3:"OPENPVP_BLACK_MEDIUM",OPENPVP_BLACK_4:"OPENPVP_BLACK_MEDIUM",OPENPVP_BLACK_5:"OPENPVP_BLACK_HIGH",OPENPVP_BLACK_6:"OPENPVP_BLACK_HIGH"},N={0:"#339C5E",1:"#339C92",2:"#33729C",3:"#5E339C"},h=function(e){var t,n=function(e){return"TUNNEL_ROYAL"===e||e.startsWith("TUNNEL_BLACK_")?1:["TUNNEL_LOW","TUNNEL_MEDIUM","TUNNEL_HIGH","TUNNEL_HIDEOUT"].includes(e)?2:["TUNNEL_DEEP","TUNNEL_HIDEOUT_DEEP"].includes(e)?3:0}((t=e["@type"],P[t]||t));return N[n]},_=r.a.memo((function(e){var t=e.clusters,n=e.connections,c=t.filter((function(e){return e["@worldmapposition"]})),o=t.filter((function(e){return e["@id"].startsWith("TNL-")})),u=Object(a.useRef)([].concat(Object(p.a)(o),Object(p.a)(c)).map((function(e){var t=[];try{var n=e.minimapmarkers.marker.map((function(e){return e["@type"]})).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});(t=Object.entries(n).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return"".concat(n," x").concat(a)}))).sort()}catch(a){}return{id:e["@id"],name:e["@displayname"],type:e["@type"],tier:e["@file"].split("_")[4],markers:t,color:h(e)}}))).current,s=Object(a.useRef)(Object(p.a)(n.map((function(e){return Object(l.a)({},e,{color:y[e.portalType]})})))).current,m={nodes:u,links:s},f=Object(a.useRef)(),b=Object(a.useCallback)((function(e,t){f.current.centerAt(e.x,e.y,t)}),[]),O=Object(a.useContext)(C),v=O.currentCluster,j=O.setCurrentCluster,P=v&&u.find((function(e){return e.id===v}));P&&f.current.zoom(5,1e3);var N=!1;return r.a.createElement(d.a,{ref:f,graphData:m,onEngineTick:function(){P&&!N&&b(P)},nodeRelSize:16,linkWidth:3,onNodeClick:function(e){if(e!==P){var t,n=Object(E.a)(u);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.fx=a.x,a.fy=a.y}}catch(r){n.e(r)}finally{n.f()}N=!0;b(e,250),setTimeout((function(){var t,n=Object(E.a)(u);try{for(n.s();!(t=n.n()).done;){var a=t.value;delete a.fx,delete a.fy}}catch(r){n.e(r)}finally{n.f()}j("".concat(e.id))}),250)}},nodeCanvasObject:function(e,t,n){var a="".concat(e.name," (").concat(e.tier,")"),r=12/n;t.lineWidth=2/n,t.font="".concat(1.5*r,"px Sans-Serif");var c=[t.measureText(a).width,r].map((function(e){return e+r}));if(t.fillStyle=e.color+"c0",t.fillRect.apply(t,[e.x-c[0]/2,e.y-c[1]/2].concat(Object(p.a)(c))),t.strokeStyle=e.id===v?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.8)",t.strokeRect.apply(t,[e.x-c[0]/2,e.y-c[1]/2].concat(Object(p.a)(c))),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.fillText(a,e.x,e.y),n>4){t.font="".concat(r,"px Sans-Serif");var o,l=r,i=Object(E.a)(e.markers);try{for(i.s();!(o=i.n()).done;){var u=o.value;l+=r,t.fillText(u,e.x,e.y+l)}}catch(s){i.e(s)}finally{i.f()}}}})})),w=r.a.createContext({ways:null}),L=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){s()({uri:window.location.href+"api/v1/staticzones",json:!0}).then((function(e){console.log(e);var t=e.reduce((function(e,t){return e[t.displayname]=t.id,e}),{});return console.log(t),t})).then((function(e){s()({uri:window.location.href+"api/v1/ways",json:!0}).then((function(t){var n=t.map((function(t){return Object(l.a)({},t,{source:e[t.fromMapName],target:e[t.toMapName]})}));console.log(n),o({ways:n})}))}))}),[]),r.a.createElement(w.Provider,{value:c},e.children)},S=n(629),k=n(621),g=n(622),x=n(6),A=n(614),B=n(584),I=n(618),T=n(625),U=[{label:"All",value:"all"},{label:"Mists",value:"mists"},{label:"Non-Mists",value:"nonMists"}],R=function(e){var t=e.onSelect,n=Object(a.useContext)(m).clusters||[],c=Object(a.useState)(""),o=Object(i.a)(c,2),l=o[0],u=o[1],s=Object(a.useState)("all"),f=Object(i.a)(s,2),E=f[0],p=f[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),O=b[0],v=b[1],C=Object(a.useState)(""),j=Object(i.a)(C,2),y=j[0],P=j[1],N=n.filter((function(e){return"all"===E||E===e.type})).filter((function(e){return e.initials===l})).filter((function(e){return!O||O===e.splitName[0]})).filter((function(e){return!y||y===e.splitName[e.splitName.length-1]})),h=N.map((function(e){return e["@displayname"]}));h.sort();var _=Array.from(new Set(N.map((function(e){return e.splitName[0]}))));_.sort();var w=Array.from(new Set(N.map((function(e){return e.splitName[e.splitName.length-1]}))));w.sort();var L=N.reduce((function(e,t){return e[t["@displayname"]]=t["@id"],e}),{}),S=Object(a.useState)(""),k=Object(i.a)(S,2),g=k[0],x=k[1];return g?r.a.createElement(A.a,{item:!0},r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:function(){return x("")}},g)):r.a.createElement(A.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(A.a,{item:!0},r.a.createElement(I.a,{variant:"contained"},U.map((function(e){var t=e.label,n=e.value;return r.a.createElement(B.a,{key:n,color:n===E?"primary":void 0,onClick:function(){return p(n)}},t)})))),r.a.createElement(A.a,{item:!0},r.a.createElement(T.a,{label:"Cluster initials",onChange:function(e){u(e.target.value.toUpperCase()),v(""),P("")}})),r.a.createElement(A.a,{container:!0,wrap:"nowrap"},r.a.createElement(A.a,{item:!0},r.a.createElement(I.a,{orientation:"vertical",variant:"contained"},_.map((function(e){return r.a.createElement(B.a,{key:e,onClick:function(){return v(e)}},e)})))),r.a.createElement(A.a,{item:!0},r.a.createElement(I.a,{orientation:"vertical",variant:"contained"},w.map((function(e){return r.a.createElement(B.a,{key:e,onClick:function(){return P(e)}},e)})))),r.a.createElement(A.a,{item:!0},r.a.createElement(I.a,{orientation:"vertical",variant:"contained"},h.map((function(e){return r.a.createElement(B.a,{key:e,onClick:function(){var n=L[e];x(e),t&&t(n)}},e)}))))))},K=Object(x.a)((function(e){return{background:{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:e.palette.background.default+"c0"}}}))((function(e){var t=e.open,n=e.onSelect,a=e.onClose;return r.a.createElement(S.a,{open:t,onClose:a},r.a.createElement(k.a,null,r.a.createElement(g.a,{variant:"h4"},"Current cluster"),r.a.createElement(R,{onSelect:n})))})),M=n(28),V=n(626),W=n(259),D=[{label:"2",color:O.a[500],value:"SOLO"},{label:"7",color:b.a[500],value:"GROUP"},{label:"20",color:v.a[500],value:"RAID"}],H=function(e){var t,n=e.open,c=e.onClose,o=Object(a.useState)(""),l=Object(i.a)(o,2),u=(l[0],l[1]),s=Object(a.useState)(new Date(0)),f=Object(i.a)(s,2),E=f[0],p=f[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),O=(b[0],b[1],Object(a.useContext)(C).currentCluster),v=Object(a.useContext)(m).clustersById;try{t=v[O]["@displayname"]}catch(j){}return r.a.createElement(S.a,{open:n,onClose:c,style:{padding:8}},r.a.createElement(k.a,null,r.a.createElement(A.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(A.a,{item:!0},r.a.createElement(g.a,null,"Current location: ",t)),r.a.createElement(R,{onSelect:u}),r.a.createElement(A.a,{item:!0},r.a.createElement(I.a,{variant:"contained"},D.map((function(e){e.color,e.label,e.value})))),r.a.createElement(A.a,{item:!0},r.a.createElement(M.a,{utils:W.a},r.a.createElement(V.a,{label:"Remaining time",ampm:!1,onChange:p,value:E}))),r.a.createElement(A.a,{item:!0},r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:c},"Submit")))))},G=function(e){var t=Object(a.useContext)(m),n=t.clusters,c=t.clustersById,o=Object(a.useContext)(w).ways,l=Object(a.useContext)(C),u=(l.currentCluster,l.setCurrentCluster),s=Object(a.useState)("currentCluster"),f=Object(i.a)(s,2),E=f[0],p=f[1],d=Object(a.useCallback)((function(){return p("map")}),[]);return n&&o?r.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0}},r.a.createElement(_,{clusters:n,clustersById:c,connections:o}),r.a.createElement(I.a,{variant:"contained",style:{position:"absolute",bottom:0,right:0}},r.a.createElement(B.a,{onClick:function(){return p("currentCluster")}},"Go to..."),r.a.createElement(B.a,{onClick:function(){return p("portalReporter")}},"New portal")),r.a.createElement(H,{open:"portalReporter"===E,onClose:d}),r.a.createElement(K,{open:"currentCluster"===E,onClose:d,onSelect:function(e){u(e),p("map")}})):null},z=n(260),Y=n(623),F=n(624),J=n(124),Z=Object(z.a)({palette:{type:"dark",primary:J.a}});var $=function(){return r.a.createElement(Y.a,{theme:Z},r.a.createElement(F.a,null),r.a.createElement(f,null,r.a.createElement(L,null,r.a.createElement(j,null,r.a.createElement(G,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[284,1,2]]]);